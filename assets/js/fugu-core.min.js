/* NM: Core script */
!function(e){"use strict";function n(){this.init()}e.nmThemeExtensions||(e.nmThemeExtensions={}),n.prototype={init:function(){var n=this;n.classHeaderFixed="header-on-scroll",n.classMobileMenuOpen="mobile-menu-open",n.classSearchOpen="header-search-open",n.classCartPanelOpen="cart-panel-open",n.$window=e(window),n.$document=e(document),n.$html=e("html"),n.$body=e("body"),n.$pageIncludes=e("#fugu-page-includes"),n.$pageOverlay=e("#fugu-page-overlay"),n.$topBar=e("#fugu-top-bar"),n.$header=e("#fugu-header"),n.$headerPlaceholder=e("#fugu-header-placeholder"),n.headerScrollTolerance=0,n.$mobileMenu=e("#fugu-mobile-menu"),n.$mobileMenuScroller=n.$mobileMenu.children(".fugu-mobile-menu-scroll"),n.$mobileMenuLi=n.$mobileMenu.find("ul li.menu-item"),n.$cartPanel=e("#fugu-cart-panel"),n.cartPanelAnimSpeed=250,n.panelsAnimSpeed=200,n.$shopWrap=e("#fugu-shop"),n.isShop=!!n.$shopWrap.length,n.shopCustomSelect="0"!=fugu_wp_vars.shopCustomSelect,n.searchEnabled="0"!==fugu_wp_vars.shopSearch,n.isChromium=!!window.chrome,n.isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,"0"!=fugu_wp_vars.pageLoadTransition&&(n.isIos=navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i),n.isIos||n.$window.on("beforeunload",(function(t){e("#fugu-page-load-overlay").addClass("fugu-loader"),n.$html.removeClass("fugu-page-loaded")})),"onpagehide"in window?window.addEventListener("pageshow",(function(){setTimeout((function(){n.$html.addClass("fugu-page-loaded")}),150)}),!1):setTimeout((function(){n.$html.addClass("fugu-page-loaded")}),150)),n.$body.removeClass("fugu-preload"),n.isTouch=!!n.$html.hasClass("touch"),n.isTouch?"0"!=fugu_wp_vars.touchHover&&n.$html.addClass("has-hover"):n.$html.addClass("has-hover"),n.headerIsFixed=!!n.$body.hasClass("header-fixed"),!("0"==fugu_wp_vars.pushStateMobile&&!n.$html.hasClass("no-touch"))&&n.$html.hasClass("history")?(n.hasPushState=!0,window.history.replaceState({nmShop:!0},"",window.location.href)):n.hasPushState=!1,n.setScrollbarWidth(),n.headerCheckPlaceholderHeight(),n.headerIsFixed&&(n.headerSetScrollTolerance(),n.mobileMenuPrep()),n.TopBarInitCycles(),n.$cartPanel.length&&n.cartPanelPrep(),n.$cartPanel.length&&"0"!==fugu_wp_vars.cartShippingMeter&&n.cartShippingMeterInit(),window.navigator.userAgent.indexOf("MSIE ")>0&&n.$html.addClass("fugu-old-ie"),"0"==fugu_wp_vars.infloadSnapbackCache||n.isTouch||n.shopInfloadSnapbackCache(),n.loadExtension(),n.bind(),n.initPageIncludes(),n.$body.hasClass("fugu-added-to-cart")&&(n.$body.removeClass("fugu-added-to-cart"),n.$window.on("load",(function(){n.$cartPanel.length&&(n.cartPanelShow(!0,!0),setTimeout((function(){n.cartPanelHideLoader()}),1e3))})))},loadExtension:function(){var n=this;e.nmThemeExtensions.shop&&e.nmThemeExtensions.shop.call(n),n.searchEnabled&&e.nmThemeExtensions.search&&e.nmThemeExtensions.search.call(n),e.nmThemeExtensions.singleProduct&&e.nmThemeExtensions.singleProduct.call(n),e.nmThemeExtensions.cart&&e.nmThemeExtensions.cart.call(n),e.nmThemeExtensions.checkout&&e.nmThemeExtensions.checkout.call(n),e.nmThemeExtensions.blog&&e.nmThemeExtensions.blog.call(n)},setScrollbarWidth:function(){var e=document.createElement("div");e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),this.scrollbarWidth=e.offsetWidth-e.clientWidth,document.body.removeChild(e)},pageIsScrollable:function(){return document.body.scrollHeight>document.body.clientHeight},urlGetParameter:function(e){var n,t,a=decodeURIComponent(window.location.search.substring(1)).split("&");for(t=0;t<a.length;t++)if((n=a[t].split("="))[0]===e)return void 0===n[1]||n[1]},updateUrlParameter:function(e,n,t){var a=new URL(e);return a.searchParams.set(n,t),a.searchParams.delete("_"),a.href},setPushState:function(e){this.hasPushState&&window.history.pushState({nmShop:!0},"",e)},TopBarInitCycles:function(){var e=this.$topBar.find(".fugu-top-bar-cycles");e.length&&setInterval((function(){var n=e.find(".active"),t=n.next().length?n.next():e.children().first();n.addClass("hide"),setTimeout((function(){n.removeClass("active hide"),t.addClass("active")}),250)}),fugu_wp_vars.topBarCycleInterval)},headerCheckPlaceholderHeight:function(){var e=this;if(0==fugu_wp_vars.headerPlaceholderSetHeight)return console.log("NM: Header placeholder height NOT set"),!1;if(!e.$body.hasClass(e.classHeaderFixed)){var n=Math.round(e.$header.innerHeight()),t=Math.round(parseInt(e.$headerPlaceholder.css("height")));Math.abs(n-t)>1&&e.$headerPlaceholder.css("height",n+"px")}},headerSetScrollTolerance:function(){var e=this;e.headerScrollTolerance=e.$topBar.length&&e.$topBar.is(":visible")?e.$topBar.outerHeight(!0):0},headerFixOnScroll:function(){var e=this;e.$window.on("scroll.nmheader",(function(){e.$body.hasClass("fugu-scroll-lock")||((document.documentElement.scrollTop||Math.abs(e.$body.offset().top))>e.headerScrollTolerance?e.$body.hasClass(e.classHeaderFixed)||e.$body.addClass(e.classHeaderFixed):e.$body.hasClass(e.classHeaderFixed)&&e.$body.removeClass(e.classHeaderFixed))}))},headerFixOnScrollUp:function(e){e=this;let n,t=0,a=0,s=!1;const o=2*Math.ceil(e.$header.outerHeight(!0));window.addEventListener("scroll",(()=>{const i=document.documentElement.scrollTop||Math.abs(e.$body.offset().top);if(e.$body.hasClass("fugu-scroll-lock")||i<0)return;const r=Math.abs(i-t),l=i<t;l?a+=r:a=0,l&&a>50&&i>o?s||(e.$body.addClass(e.classHeaderFixed),clearTimeout(n),n=setTimeout((function(){e.$header.addClass("animate-in")}),50),s=!0):s&&(e.$body.removeClass(e.classHeaderFixed),e.$header.removeClass("animate-in"),s=!1),t=i}))},bind:function(){var n=this,t=null;if(n.$window.on("resize",(function(){t&&clearTimeout(t),t=setTimeout((function(){n.headerCheckPlaceholderHeight(),n.headerIsFixed&&(n.headerSetScrollTolerance(),n.mobileMenuPrep())}),250)})),!n.$body.hasClass("mobile-menu-desktop")){var a=function(e){e.matches&&n.$body.hasClass(n.classMobileMenuOpen)&&n.mobileMenuClose()},s=window.matchMedia("(min-width: 992px)");try{s.addEventListener("change",a)}catch(e){try{s.addListener(a)}catch(e){console.error("NM: Media query matching - "+e)}}}n.isTouch&&n.$window.on("orientationchange",(function(){n.$body.addClass("touch-orientation-change"),setTimeout((function(){n.$body.removeClass("touch-orientation-change")}),500)})),n.headerIsFixed&&("1"==fugu_wp_vars.headerFixedScrollUp?n.headerFixOnScrollUp():n.headerFixOnScroll(),n.$window.trigger("scroll"));var o=e("#fugu-top-menu").children(".menu-item"),i=e("#fugu-main-menu-ul").children(".menu-item"),r=e("#fugu-right-menu-ul").children(".menu-item");e().add(o).add(i).add(r).on("mouseenter",(function(){var t=e(this),a=t.children(".sub-menu");if(a.length){var s=n.$window.innerWidth()-(a.offset().left+a.width());if(s<0&&a.css("left",s-33+"px"),!t.hasClass("bridge-height-set")){var o=t.closest("nav");if(o.length){t.addClass("bridge-height-set");var i=Math.ceil((o.height()-t.height())/2);a.children(".fugu-sub-menu-bridge").css("height",i+1+"px")}}}})).on("mouseleave",(function(){var n=e(this).children(".sub-menu");n.length&&n.css("left","")})),n.isShop||n.$header.on("click.nmHeaderShopRedirect",".shop-redirect-link > a",(function(n){n.preventDefault();var t=e(this).attr("href");window.location.href=t+"#shop"})),n.$header.on("click.nmMobileMenuToggle",".fugu-mobile-menu-button",(function(e){e.preventDefault(),n.$body.hasClass(n.classMobileMenuOpen)?n.mobileMenuClose():n.mobileMenuOpen()})),e("#fugu-mobile-menu-close-button").on("click",(function(e){e.preventDefault(),n.mobileMenuClose()}));var l=function(e,n){e.toggleClass("active"),n.toggleClass("open")};(n.$mobileMenuLi.on("click.nmMenuToggle",(function(t){t.stopPropagation();var a=e(this);if(!n.$body.hasClass("mobile-menu-panels")||e(t.target).is("li, a, .fugu-menu-toggle")){n.$document.trigger("fugu_mobile_menu_toggle",[t,this]);var s=a.children(".sub-menu");if(s.length){if(a.hasClass("fugu-notoggle")&&!e(t.target).hasClass("fugu-menu-toggle"))return;t.preventDefault(),l(a,s)}}})),e(".fugu-mobile-sub-menu-back-button").on("click",(function(n){n.preventDefault(),n.stopPropagation();var t=e(this).closest(".menu-item"),a=t.children(".sub-menu");t.addClass("hide-panel"),setTimeout((function(){l(t,a),t.removeClass("hide-panel")}),250)})),n.$cartPanel.length&&n.cartPanelBind(),n.$pageIncludes.hasClass("login-popup")&&(n.loginRegisterNonceValuesUpdated=!1,e("#fugu-menu-account-btn").on("click.nmLoginShowPopup",(function(e){e.preventDefault(),n.loginRegisterPopupOpen()}))),n.$body.on("click",".fugu-page-overlay",(function(){var t=e(this);n.pageOverlayClick(t)})),"1"==fugu_wp_vars.shopAttsSwapImage)&&(!(!n.isTouch||"1"!=fugu_wp_vars.shopAttsSwapImageOnTouch)?n.$body.on("click",".fugu-shop-loop-attribute-link",(function(t){var a=e(this);a.hasClass("selected")||(t.preventDefault(),a.parent().children(".selected").removeClass("selected"),a.addClass("selected"),n.shopAttsSwapImage(a))})):(n.$body.on("mouseenter",".fugu-shop-loop-attribute-link",(function(){var t=e(this);n.shopAttsSwapImage(t)})),"1"==fugu_wp_vars.shopAttsSwapImageRevert&&(n.$body.on("mouseleave.nmShopImageRevert",".fugu-shop-loop-attributes",(function(){var t=e(this);n.shopAttsSwapImageRevert(t,!1)})),n.$window.on("beforeunload",(function(e){n.$body.off("mouseleave.nmShopImageRevert")})))))},pageScrollLock:function(){var e=this;e.isTouch&&(e.pageScrollOffset=window.pageYOffset,e.$body.addClass("fugu-scroll-lock").css({position:"fixed",top:"-"+e.pageScrollOffset+"px",width:"100%",overflow:"hidden"}))},pageScrollUnlock:function(){var e=this;e.isTouch&&(e.$body.css({position:"",top:"",width:"",overflow:""}),setTimeout((function(){e.$body.removeClass("fugu-scroll-lock")}),100),window.scrollTo(0,e.pageScrollOffset))},pageOverlayShow:function(){this.$pageOverlay.addClass("show")},pageOverlayClick:function(e){var n=this,t=!0;e=e||n.$pageOverlay,n.$body.hasClass(n.classMobileMenuOpen)?(n.mobileMenuClose(),t=!1):n.$body.hasClass(n.classSearchOpen)?(n.headerSearchTogglePanel(),t=!1):n.$body.hasClass(n.classCartPanelOpen)?(n.cartPanelHide(),t=!1):n.$body.hasClass("shop-filters-popup-open")&&(n.shopFiltersPopupHide(),t=!1),t&&setTimeout((function(){n.$body.trigger("fugu_page_overlay_hide"),e.addClass("fade-out"),setTimeout((function(){e.removeClass().addClass("fugu-page-overlay")}),250)}),0)},mobileMenuPrep:function(){var e=this,n=e.$window.height()-e.$header.outerHeight(!0);e.$mobileMenuScroller.css({"max-height":n+"px","margin-right":"-"+e.scrollbarWidth+"px"})},mobileMenuOpen:function(e){var n=this,t=n.$header.outerHeight(!0);n.$mobileMenuScroller.css("margin-top",t+"px"),n.pageScrollLock(),n.$body.addClass(n.classMobileMenuOpen)},mobileMenuClose:function(){var e=this;e.$body.addClass("mobile-menu-closing"),e.$body.removeClass(e.classMobileMenuOpen),setTimeout((function(){e.$body.removeClass("mobile-menu-closing")}),e.cartPanelAnimSpeed),e.pageScrollUnlock()},loginRegisterPopupOpen:function(){var n=this;e("#fugu-login-wrap").children(".login").css("display",""),e.magnificPopup.open({mainClass:"fugu-login-popup fugu-mfp-fade-in",closeMarkup:'<a class="mfp-close fugu-font fugu-font-close2"></a>',removalDelay:180,closeOnBgClick:!1,items:{src:"#fugu-login-popup-wrap",type:"inline"},callbacks:{open:function(){n.loginRegisterNonceValuesUpdated||(n.loginRegisterNonceValuesUpdated=!0,e.ajax({type:"POST",url:wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","fugu_ajax_login_get_nonces"),dataType:"json",cache:!1,headers:{"cache-control":"no-cache"},success:function(n){e("#woocommerce-login-nonce").attr("value",n.login),e("#woocommerce-register-nonce").attr("value",n.register)}}))},close:function(){e("#fugu-login-wrap").addClass("inline fade-in slide-up"),e("#fugu-register-wrap").removeClass("inline fade-in slide-up")}}})},cartPanelPrep:function(){var n=this;n.cartPanelAjax=null,"0"!=fugu_wp_vars.cartPanelQtyArrows&&(n.quantityInputsBindButtons(n.$cartPanel),n.$cartPanel.on("blur","input.qty",(function(){var t=e(this),a=parseFloat(t.val()),s=parseFloat(t.attr("max"));""!==a&&"NaN"!==a||(a=0),"NaN"===s&&(s=""),a>s&&(t.val(s),a=s),a>0&&n.cartPanelUpdate(t)})),n.$document.on("fugu_qty_change",(function(t,a){n.$body.hasClass(n.classCartPanelOpen)&&n.cartPanelUpdate(e(a))})))},cartPanelBind:function(){var n=this;n.isTouch&&n.$cartPanel.on("touchmove",(function(e){e.stopPropagation()})),e("#fugu-menu-cart-btn, #fugu-mobile-menu-cart-btn").on("click.nmAtc",(function(t){if(t.preventDefault(),n.$body.hasClass(n.classMobileMenuOpen)){var a=e(this);n.mobileMenuClose(),a.trigger("click")}else n.cartPanelShow()})),e("#fugu-cart-panel-close").on("click.nmCartPanelClose",(function(e){e.preventDefault(),n.cartPanelHide()})),n.$cartPanel.on("click.nmCartPanelClose","#fugu-cart-panel-continue",(function(e){e.preventDefault(),n.cartPanelHide()}))},cartPanelShow:function(e,n){var t=this;n&&"0"==fugu_wp_vars.cartPanelShowOnAtc?t.shopShowNotices():(e&&t.cartPanelShowLoader(),t.pageScrollLock(),t.$body.addClass("cart-panel-opening "+t.classCartPanelOpen),setTimeout((function(){t.$body.removeClass("cart-panel-opening")}),t.cartPanelAnimSpeed))},cartPanelHide:function(){var e=this;e.$body.addClass("cart-panel-closing"),e.$body.removeClass(e.classCartPanelOpen),setTimeout((function(){e.$body.removeClass("cart-panel-closing")}),e.cartPanelAnimSpeed),e.pageScrollUnlock()},cartPanelShowLoader:function(){this.$cartPanel.addClass("loading")},cartPanelHideLoader:function(){this.$cartPanel.removeClass("loading")},cartPanelUpdate:function(n){var t=this;t.cartPanelAjax&&t.cartPanelAjax.abort(),n.closest("li").addClass("loading");var a=e("#fugu-cart-panel-form"),s=a.find("#_wpnonce"),o={};s.length?(o.fugu_cart_panel_update="1",o.update_cart="1",o[n.attr("name")]=n.val(),o._wpnonce=s.val(),t.cartPanelAjax=e.ajax({type:"POST",url:a.attr("action"),data:o,dataType:"html",error:function(n,t,a){console.log("NM: AJAX error - cartPanelUpdate() - "+a),e("#fugu-cart-panel .cart_list").children(".loading").removeClass("loading")},success:function(n){e(document.body).trigger("wc_fragment_refresh").trigger("updated_cart_totals")},complete:function(){t.cartPanelAjax=null}})):console.log("NM - cartPanelUpdate: Nonce field not found.")},cartShippingMeterSaveProgress:function(e){var n=e?e.data("progress"):0;localStorage.setItem("nmThemeShippingMeterProgress",n)},cartShippingMeterGetProgress:function(e){var n=localStorage.getItem("nmThemeShippingMeterProgress");return n=n||0},cartShippingMeterSetProgress:function(e){var n=this,t=e.data("progress"),a=n.cartShippingMeterGetProgress();e.css("width",a+"%"),setTimeout((function(){e.addClass("transition-on"),e.css("width",t+"%"),setTimeout((function(){e.attr("data-progress",t),n.cartShippingMeterSaveProgress(e)}),400)}),100)},cartShippingMeterInit:function(){var n,t=this;t.cartShippingMeterSaveProgress(null),new MutationObserver((function(a){a.forEach((function(a){(n=e(a.target).find(".fugu-cart-shipping-meter-bar-progress")).length?t.cartShippingMeterSetProgress(n):t.cartShippingMeterSaveProgress(null)}))})).observe(t.$cartPanel[0],{attributes:!1,childList:!0,characterData:!1})},shopReplaceFragments:function(n){var t;e.each(n,(function(n,a){(t=e(a)).length&&e(n).replaceWith(t)}))},shopAttsSwapImage:function(n){var t=n.data("attr-src");if(t){var a,s=n.closest(".product"),o=s.find(".attachment-woocommerce_thumbnail").first();if("PICTURE"==o[0].tagName)o.children().each((function(){(a=e(this))[0].hasAttribute("src")&&a.attr("src",t),a[0].hasAttribute("srcset")&&a.attr("srcset",t)}));else o.attr("src",t),o.attr("srcset",t);s.addClass("fugu-attr-image-set")}else this.shopAttsSwapImageRevert(n,!0)},shopAttsSwapImageRevert:function(n,t){var a=n.closest(".product");if(a.hasClass("fugu-attr-image-set")){var s=t?n.closest(".fugu-shop-loop-attributes"):n,o=s.data("thumb-src");if(o){var i,r=s.closest(".product").find(".attachment-woocommerce_thumbnail").first(),l=s.data("thumb-srcset");if("PICTURE"==r[0].tagName)r.children().each((function(){(i=e(this))[0].hasAttribute("src")&&i.attr("src",o),i[0].hasAttribute("srcset")&&i.attr("srcset",l)}));else r.attr("src",o),r.attr("srcset",l);a.removeClass("fugu-attr-image-set")}}},shopInfloadSnapbackCache:function(){if(this.$window.on("beforeunload",(function(){var e=sessionStorage.getItem("pageCacheViews");if(e){var n=sessionStorage.getItem("pageCache");n&&"{}"!==n&&(e=parseInt(e)+1,sessionStorage.setItem("pageCacheViews",e))}else sessionStorage.setItem("pageCacheViews",1)})),!e("#fugu-shop-browse-wrap").length)return!1;var n=SnapbackCache({bodySelector:"#fugu-shop-browse-wrap"}),t=fugu_wp_vars.infloadSnapbackCacheLinks;this.$body.on("click","#fugu-shop-browse-wrap a",(function(){var a=e(this);e("#fugu-shop-browse-wrap").hasClass("products-loaded")&&a.is(t)&&n.cachePage()}))},quantityInputsBindButtons:function(n){var t,a=this,s=fugu_wp_vars.cartPanelQtyThrottleTimeout;n.off("click.nmQty").on("click.nmQty",".fugu-qty-plus, .fugu-qty-minus",(function(){t&&clearTimeout(t);var n=e(this),o=n.closest(".quantity").find(".qty"),i=parseFloat(o.val()),r=parseFloat(o.attr("max")),l=parseFloat(o.attr("min")),c=o.attr("step");i&&""!==i&&"NaN"!==i||(i=0),""!==r&&"NaN"!==r||(r=""),""!==l&&"NaN"!==l||(l=0),"any"!==c&&""!==c&&void 0!==c&&"NaN"!==parseFloat(c)||(c=1),n.hasClass("fugu-qty-plus")?r&&(r==i||i>r)?o.val(r):(o.val(i+parseFloat(c)),t=setTimeout((function(){a.quantityInputsTriggerEvents(o)}),s)):l&&(l==i||i<l)?o.val(l):i>0&&(o.val(i-parseFloat(c)),t=setTimeout((function(){a.quantityInputsTriggerEvents(o)}),s))}))},quantityInputsTriggerEvents:function(e){e.trigger("change"),this.$document.trigger("fugu_qty_change",e)},initPageIncludes:function(){if((a=this).$pageIncludes.hasClass("row-full-height")){var n=function(){var n=e(".fugu-row-full-height:first");if(n.length){var t,s=a.$window.height(),o=n.offset().top;s>o&&(t=100-o/(s/100),n.css("min-height",t+"vh"))}};n();var t=null;a.$window.on("resize.nmRow",(function(){t&&clearTimeout(t),t=setTimeout((function(){n()}),250)}))}if(!!(!a.isTouch||0!=fugu_wp_vars.rowVideoOnTouch)&&a.$pageIncludes.hasClass("video-background")&&e(".fugu-row-video").each((function(){var n=e(this),t=n.data("video-url");if(t){var a=vcExtractYoutubeId(t);a&&insertYoutubeVideoAsBackground(n,a)}})),a.$window.on("load",(function(){a.$pageIncludes.hasClass("banner")&&a.elementBanner(e(".fugu-banner")),a.$pageIncludes.hasClass("banner-slider")&&e(".fugu-banner-slider").each((function(){a.elementBannerSlider(e(this))})),a.$pageIncludes.hasClass("product-slider")&&e(".fugu-product-slider").each((function(){a.elementProductSlider(e(this))})),a.$pageIncludes.hasClass("product-reviews-slider")&&e(".fugu-product-reviews-slider").each((function(){a.elementProductReviewsSlider(e(this))})),a.$pageIncludes.hasClass("post-slider")&&e(".fugu-post-slider").each((function(){a.elementPostSlider(e(this))})),"0"!=fugu_wp_vars.wpGalleryPopup&&a.$pageIncludes.hasClass("wp-gallery")&&e(".gallery").each((function(){e(this).magnificPopup({mainClass:"fugu-wp-gallery-popup fugu-mfp-fade-in",closeMarkup:'<a class="mfp-close fugu-font fugu-font-close2"></a>',removalDelay:180,delegate:".gallery-icon > a",type:"image",gallery:{enabled:!0,arrowMarkup:'<a title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir% fugu-font fugu-font-angle-right"></a>'},image:{titleSrc:function(e){return e.el.parent().next(".wp-caption-text").text()||""}},closeBtnInside:!1})}))})),a.$pageIncludes.hasClass("product_categories")){var a=this,s=e(".fugu-product-categories");a.elementProductCategoriesBindLinks(s),a.$pageIncludes.hasClass("product_categories_masonry")&&a.$window.on("load",(function(){for(var n=0;n<s.length;n++)a.elementProductCategories(e(s[n]))}))}a.$pageIncludes.hasClass("lightbox")&&e(".fugu-lightbox").each((function(){a.elementLightbox(e(this))})),a.$pageIncludes.hasClass("elementor-tabs")&&e(".fugu-elementor-tabs").each((function(){a.elementElementorTabs(e(this))}));var o=e("#brands_a_z");o.length&&(o.css("min-height",o.height()+"px"),o.children(".brands_index").on("click","a",(function(n){n.preventDefault();var t=e(this),a=t.parent(),s=t.attr("href");t.closest(".brands_index").children(".current-index").removeClass("current-index"),o.children(".current-index").removeClass("current-index"),a.addClass("current-index"),"#all"===s?o.removeClass("is-filtered"):(o.addClass("is-filtered"),e(s).parent(".fugu-brands-wrapper").addClass("current-index"))})),o.on("click",".top",(function(e){e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})))},elementBanner:function(n){var t=this;t.isShop&&t.filtersEnableAjax&&n.find(".fugu-banner-shop-link").on("click.nmBannerAjax",(function(n){n.preventDefault(),e(this).attr("href")&&t.shopExternalGetPage(e(this).attr("href"))}))},elementBannerAddAnimClass:function(e,n){if(e.slideIndex!=n){e.slideIndex=n,e.$bannerContent&&e.$bannerContent.removeClass(e.bannerAnimation);var t=e.isSlick?e.find(".slick-track .slick-active"):e.children(".flickity-viewport").children(".flickity-slider").children(".is-selected");e.$bannerContent=t.find(".fugu-banner-text-inner"),e.$bannerContent.length&&(e.bannerAnimation=e.$bannerContent.data("animate"),e.$bannerContent.addClass(e.bannerAnimation))}},elementBannerSlider:function(n){var t=this;if(n.isSlick=!!n.hasClass("plugin-slick"),n.children().wrap('<div class="fugu-banner-slide"></div>'),n.isSlick){var a={arrows:!1,prevArrow:'<a class="slick-prev"><i class="fugu-font fugu-font-angle-thin-left"></i></a>',nextArrow:'<a class="slick-next"><i class="fugu-font fugu-font-angle-thin-right"></i></a>',dots:!1,edgeFriction:0,infinite:!1,pauseOnHover:!0,speed:350,touchThreshold:30};a=e.extend(a,n.data()),n.on("init",(function(){t.$document.trigger("banner-slider-loaded"),t.elementBannerAddAnimClass(n,0)})),n.on("afterChange",(function(e,a,s){t.elementBannerAddAnimClass(n,s)})),n.on("setPosition",(function(n,a){var s=a.$slider,o=e(a.$slides[a.currentSlide]);t.elementBannerSliderToggleLayoutClass(s,o)})),n.slick(a)}else{var s,o=e.extend({},n.data("options"));if(n.one("select.flickity",(function(){t.$document.trigger("banner-slider-loaded"),t.elementBannerAddAnimClass(n,0)})),n.on("settle.flickity",(function(){var e=s.selectedIndex;t.elementBannerAddAnimClass(n,e)})),n.flickity(o),s=n.data("flickity"),n.on("select.flickity",(function(){var n=e(this),a=s?e(s.selectedElement):n.find(".is-selected");t.elementBannerSliderToggleLayoutClass(n,a)})),n.trigger("select.flickity"),n.hasClass("has-text-parallax")){var i,r=n.find(".fugu-banner-text");n.on("scroll.flickity",(function(e,n){s.slides.forEach((function(e,n){i=1*(e.target+s.x)/3,r[n].style.transform="translate3d("+i+"px,0,0)"}))}))}}},elementBannerSliderToggleLayoutClass:function(e,n){var t=n.children(".fugu-banner");t.hasClass("alt-mobile-layout")&&"absolute"!=t.children(".fugu-banner-content").css("position")?e.addClass("alt-mobile-layout-showing"):e.removeClass("alt-mobile-layout-showing")},elementProductSlider:function(n){var t=n.find(".fugu-products:first"),a={adaptiveHeight:!0,arrows:!1,prevArrow:'<a class="slick-prev"><i class="fugu-font fugu-font-angle-thin-left"></i></a>',nextArrow:'<a class="slick-next"><i class="fugu-font fugu-font-angle-thin-right"></i></a>',dots:!0,edgeFriction:0,infinite:!1,speed:350,touchThreshold:30,slidesToShow:4,slidesToScroll:4,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:518,settings:{slidesToShow:1,slidesToScroll:1}}]};a=e.extend(a,n.data());var s=n.data("slides-to-show-mobile"),o=2==parseInt(a.slidesToShow)?2:3,i=parseInt(s)>2?s:2,r=s;a.responsive[0].settings.slidesToShow=o,a.responsive[0].settings.slidesToScroll=o,a.responsive[1].settings.slidesToShow=i,a.responsive[1].settings.slidesToScroll=i,a.responsive[2].settings.slidesToShow=r,a.responsive[2].settings.slidesToScroll=r,t.slick(a)},elementProductReviewsSlider:function(n){var t=n.find(".fugu-product-reviews-ul"),a={adaptiveHeight:!0,arrows:!1,prevArrow:'<a class="slick-prev"><i class="fugu-font fugu-font-angle-thin-left"></i></a>',nextArrow:'<a class="slick-next"><i class="fugu-font fugu-font-angle-thin-right"></i></a>',dots:!0,edgeFriction:0,infinite:!1,speed:350,touchThreshold:30,slidesToShow:4,slidesToScroll:4,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:518,settings:{slidesToShow:1,slidesToScroll:1}}]};2==(a=e.extend(a,n.data())).slidesToShow&&(a.responsive[0].settings.slidesToShow=2,a.responsive[0].settings.slidesToScroll=2);var s=function(n){if(e(n).is(":visible")){var t=[],a=0;setTimeout((function(){e(".slick-track .slick-active",n).each((function(n){t[n]=e(this).outerHeight()})),t.forEach((function(e){e>a&&(a=e)})),e(".slick-list",n).css("height",Math.ceil(a)+"px")}),10)}};t.on("init",(function(e){s(this)})),t.on("beforeChange",(function(e,n,t){s(this)}));var o=null;this.$window.on("resize.reviewsSlider",(function(){o&&clearTimeout(o),o=setTimeout((function(){s(t[0])}),250)})),t.slick(a)},elementPostSlider:function(n){var t={adaptiveHeight:!0,arrows:!1,prevArrow:'<a class="slick-prev"><i class="fugu-font fugu-font-angle-thin-left"></i></a>',nextArrow:'<a class="slick-next"><i class="fugu-font fugu-font-angle-thin-right"></i></a>',dots:!0,edgeFriction:0,infinite:!1,pauseOnHover:!0,speed:350,touchThreshold:30,slidesToShow:4,slidesToScroll:4,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:518,settings:{slidesToShow:1,slidesToScroll:1}}]};2==(t=e.extend(t,n.data())).slidesToShow&&(t.responsive[0].settings.slidesToShow=2,t.responsive[0].settings.slidesToScroll=2),n.slick(t)},elementProductCategories:function(e){if(e.hasClass("masonry-enabled")){var n=e.children(".woocommerce").children("ul");n.masonry({itemSelector:".product-category",gutter:0,initLayout:!1}),n.masonry("on","layoutComplete",(function(){n.closest(".fugu-product-categories").removeClass("fugu-loader"),n.addClass("show")})),n.masonry()}},elementProductCategoriesBindLinks:function(n){var t=this;t.isShop&&t.filtersEnableAjax&&n.find(".product-category a").on("click",(function(n){n.preventDefault(),t.shopExternalGetPage(e(this).attr("href"))}))},elementLightbox:function(n){n.on("click",(function(n){n.preventDefault(),n.stopPropagation();var t=e(this),a=t.data("mfp-type"),s={mainClass:"fugu-wp-gallery-popup fugu-mfp-zoom-in",closeMarkup:'<a class="mfp-close fugu-font fugu-font-close2"></a>',removalDelay:180,type:a,closeBtnInside:!1,image:{titleSrc:"data-mfp-title"}};s.closeOnContentClick="inline"!=a,t.magnificPopup(s).magnificPopup("open")}))},elementElementorTabs:function(n){var t,a;n.children(".fugu-elementor-tabs-wrapper").children(".fugu-elementor-tab").on("click",(function(n){n.preventDefault(),(t=e(this)).hasClass("fugu-elementor-active")||((a=t.closest(".fugu-elementor-tabs-wrapper").children(".fugu-elementor-active")).removeClass("fugu-elementor-active"),t.addClass("fugu-elementor-active"),e("#"+a.attr("aria-controls")).removeClass("fugu-elementor-active"),e("#"+t.attr("aria-controls")).addClass("fugu-elementor-active"))}))}},e.nmTheme=n.prototype,e.nmReady=function(e){"complete"===document.readyState||"interactive"===document.readyState?setTimeout(e,1):document.addEventListener("DOMContentLoaded",e)},e.nmReady((function(){e.nmThemeInstance=new n}))}(jQuery);